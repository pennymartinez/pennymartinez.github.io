!function(e){"use strict";function t(e,t){let i=!1,r=!0,o=!0,a=!0;return!(void 0!==e.first_name&&!(r=n(e.first_name,t.first_name)))&&(!(void 0!==e.last_name&&!(o=n(e.last_name,t.last_name)))&&(!(void 0!==e.email&&!(a=n(e.email,t.email)))&&(r&&o&&a&&(i=!0),i)))}function n(e,t,n=""){if(function(e){let t=!1;return t=!(null==e.getAttribute("required")||""==e.getAttribute("required"))}(e)){let i=e.placeholder;i=i.replace(" *","");let r=n||`${i} field is required!`;if(void 0===t||""==t)return toastr.error(r),!1}return!0}e(".better-payment-stripe-bt").on("click",function(n){n.preventDefault();const i=e("#"+this.form.id),r=e(i),o=e(this),a=r.data("better-payment"),s=r.serializeObject();return!!t(this.form,s)&&(void 0===s.pay_amount||""==s.pay_amount?(toastr.error("Amount field is required!"),!1):parseFloat(s.pay_amount)<1?(toastr.error("Minimum amount is 1!"),!1):void 0===s.email||""==s.email||(l=s.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))?(e(this).html('Submitting <span class="elementor-control-spinner">&nbsp;<i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>'),void e.ajax({url:betterPayment.ajax_url,type:"post",data:{action:"better_payment_stripe_get_token",security:betterPayment.nonce,fields:s,setting_data:a},success:function(e){void 0!==e.data.stripe_data?(o.html('Redirecting <span class="elementor-control-spinner">&nbsp;<i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>'),Stripe(e.data.stripe_public_key).redirectToCheckout({sessionId:e.data.stripe_data}).then(function(e){})):(o.html("Stripe"),toastr.error(e.data))},error:function(){console.log("Error")}})):(toastr.error("Email address is invalid!"),!1));var l}),e(".better-payment-paypal-bt").on("click",function(n){const i=e("#"+this.form.id),r=e(i),o=e(this).data("paypal-info"),a=r.serializeObject();let s=!0;return!!t(this.form,a)&&(void 0!==a.pay_amount&&""!=a.pay_amount||(s=!1,toastr.error("Amount field is required!")),o.business_email||(s=!1,toastr.error("Business Email is required!")),s?void 0:(n.preventDefault(),!1))}),e.fn.serializeObject=function(){var t={},n=this.serializeArray();return e.each(n,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},e(".bp-custom-pay-amount").on("change",function(e){void 0===this.form.id&&toastr.error("Something went wrong!"),document.querySelectorAll("#"+this.form.id+' .bp-payment-amount-wrap input[type="radio"]').forEach(e=>{e.checked=!1})}),e(".bp-form_pay-radio").on("click",function(t){void 0===this.form.id&&toastr.error("Something went wrong!");const n=e(this);var i=parseFloat(n.val());if(""==i)return!1;e("#"+this.form.id+" .bp-custom-pay-amount").val(i)}),e(window).on("elementor/frontend/init",()=>{const e=elementorModules.frontend.handlers.Base.extend({getDefaultSettings:function(){return{selectors:{form:".elementor-form"}}},getDefaultElements:function(){let e=this.getSettings("selectors"),t={};return t.$form=this.$element.find(e.form),t},bindEvents:function(){this.elements.$form.on("submit_success",this.handleFormAction)},handleFormAction:function(e,t){if(void 0!==t.data.better_stripe_data){Stripe(t.data.better_stripe_data.stripe_public_key).redirectToCheckout({sessionId:t.data.better_stripe_data.stripe_data}).then(function(e){})}}});elementorFrontend.hooks.addAction("frontend/element_ready/form.default",t=>{elementorFrontend.elementsHandler.addHandler(e,{$element:t})}),"undefined"!=typeof elementor&&elementor.hooks.addAction("panel/open_editor/widget/form",function(e,t,n){elementor.hooks.addFilter("elementor_pro/forms/content_template/item",function(e,t,n){let i="";if(void 0!==n.better_payment_pay_amount_enable&&(i=n.better_payment_pay_amount_enable),console,l,void 0!==e.field_type&&"pay_amount"==e.field_type&&"yes"===i){let t=e.field_label,i=void 0!==e.bp_placeholder?e.bp_placeholder:"",r="USD";n.submit_actions.includes("stripe")?r=void 0!==n.better_payment_form_stripe_currency?n.better_payment_form_stripe_currency:r:n.submit_actions.includes("paypal")&&(r=void 0!==n.better_payment_form_paypal_currency?n.better_payment_form_paypal_currency:r);let o=`<label for="form-field-pay_amount" class="elementor-field-label">${t}</label>`,a=`  <div class="bp-input-group mb-2">\n                                                            <div class="bp-input-group-prepend">\n                                                                <div class="bp-input-group-text" title="${r}">${function(e="USD"){let t="$",n={AUD:"$",CAD:"$",CZK:"Kč",DKK:"kr",EUR:"€",HKD:"$",HUF:"ft",ILS:"₪",JPY:"¥",MXN:"$",NOK:"kr",NZD:"$",PHP:"₱",PLN:"zł",GBP:"£",RUB:"₽",SGD:"$",SEK:"kr",CHF:"CHF",TWD:"$",THB:"฿",TRY:"₺",USD:"$"};e in n&&(t=n[e]);return t}(r)}</div>\n                                                            </div>\n                                                            ${`<input type="number" name="form_fields[pay_amount]" id="form-field-pay_amount" class="elementor-field elementor-size-sm elementor-field-textual bp-elementor-field-textual-amount" min="${e.bp_field_min}" max="${e.bp_field_max}" placeholder="${i}" >`}\n                                                        </div>\n                                                    `;e.field_type="html",e.field_html=o+a}return e},10,3)})}),toastr.options={timeOut:"2000",toastClass:"font-size-md"}}(jQuery);